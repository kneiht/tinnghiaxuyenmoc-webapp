
<div up-hungry id="modal">
    <div id="modal-body" class="modal z-50 fixed inset-0 bg-slate-600 bg-opacity-60 overflow-y-auto h-full w-full flex justify-center">
        
        <!-- Modal Content -->
        <div class="relative top-16 mb-10 mx-4 card h-fit w-full sm:w-fit">

            <h3 class="mt-7 mb-6 text-xl font-bold leading-6 text-center text-theme">{{ text.title }}</h3>
            
            <!-- Result could be a html card if success or a new form modal with error if fail, if success, the card will be added right after the div cards, else the form will be the same place but display as fixed -->
            <form enctype="multipart/form-data" method="post"
                   action="{{ text.form_url }}" up-submit
                    {% if record %}
                        up-target="#modal:maybe, #record_{{ record.pk }}:maybe"
                    {% else %}
                        up-target="#modal:maybe, #display-table-records:before:maybe, #display-records:before:maybe"
                    {% endif %}>

                {% if form.non_field_errors %}
                <div class="px-6 py-3">
                    {% for error in form.non_field_errors %}
                    <p class="text-red-500">{{ error }}</p>
                    {% endfor %}
                </div>
                {% endif %}

                {% if form.fields|length >= 12 %}
                <div class="grid grid-cols-1 sm:grid-cols-3 sm:w-[900px] gap-4 px-6">
                
                    {% elif form.fields|length >= 5 and form.fields|length < 12 %}
                <div class="grid grid-cols-1 sm:grid-cols-2 sm:w-[600px] gap-4 px-6">

                {% else %}
                <div class="grid grid-cols-1 w-[400px]  gap-4 px-6">
                {% endif %}

                    {% if text.project_id %}  
                        <input type="hidden" name="project" value="{{ text.project_id }}">
                    {% endif %}

                    {% csrf_token %}
                    {% for field in form %}
                        {% if field.name != 'project' and field.name != 'description'%}
                        <div class="">
                                <div>
                                    <label for="{{ field.name }}" class="text-theme">{{ field.label }}</label>
                                    {{ field }}    
                                
                                    {% if field.help_text %}
                                        <p class="text-blue-500 px-3">{{ field.help_text }}</p>
                                    {% endif %}
                                    {% for error in field.errors %}
                                        <p class="text-red-500 px-3">{{ error }}</p>
                                    {% endfor %}
                                </div>
                        </div>
                        {% endif %}
                    {% endfor %}

                    {% if form.description.name == 'description' %}  
                    <div class="col-span-full">
                            <label for="description" class="text-theme">Mô tả</label>
                            <textarea placeholder="Nhập mô tả"  "description" cols="40" class="form-input h-20" id="id_description"></textarea> 
                    </div>
                    {% endif %}


                </div>



                <div class="flex justify-center items-center gap-5 pt-8 pb-7">
                    <button type="submit" class="submit btn btn-primary rounded-full w-36" onclick="this.form.delete.value = 'false';">
                        {{ text.submit_button_name }}
                    </button>
                    <button id='cancel-modal' type="button" class="btn btn-secondary rounded-full w-36" onclick="document.getElementById('modal-body').remove();">
                        Hủy bỏ
                    </button>

                </div>

            </form>
        </div>
    </div>
</div>
