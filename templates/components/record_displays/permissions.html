{% load custom_tags %}
{% load humanize %}
{% load static %}

<div id="display-records" class="w-full overflow-scroll mt-4">
    <table id="display-table-records" class="relative table-auto w-full border border-slate-300 dark:border-slate-900 border-opacity-50 rounded-2xl shadow-md">
        {% if not update %}
        <thead class="sticky top-0">
            <tr class="text-sm leading-normal text-theme rounded-2xl shadow-md bg-white dark:bg-slate-800
            border border-slate-300 dark:border-slate-900 border-opacity-50 text-nowrap ">
                {% for header in headers %}
                    <th class="px-6 py-3 text-left font-semibold">{{ header }}</th>
                {% endfor %}

                    <th></th>
            </tr>
        </thead>
        {% endif %}

        
        {% for record in records %}
            <tbody id="record_{{ record.pk }}" record-id="{{ record.pk }}" class="{{ record.style }}">
                <tr class="{{ record.style }} bg-gray-50 hover:bg-blue-100 dark:bg-gray-800 dark:even:bg-gray-700 dark:hover:bg-gray-600">
                    {% for field in fields %}
                    <td class="px-6 py-3 border-b border-gray-200 dark:border-gray-600 text-xs text-gray-700 dark:text-gray-300 text-nowrap">
                            
                        {% if 'status' in field  %} 
                            <a class="{{ record|get_value:field }}  cursor-pointer text-white p-1 rounded-md shadow-2xl top-5 right-5 px-2 text-nowrap"
                                up-target="#display-records, #load-more:maybe"
                                href="{% url 'load_elements' %}?q={% encode_params page=page model=model start_date=start_date end_date=end_date check_date=check_date check_month=check_month group_by=group_by tab=tab elements='display_records' project_id=project_id %}{% for field_name, value in search_queries.items %}&{{ field_name }}={{ value }}{% endfor %}&sort={{sort}}&{{field}}={{ record|get_value:field }}">
                                {{ record|format_display:field }}
                            </a>
                
                        {% else %}
                            {{ record|format_display:field }}
                        {% endif %} 

                    </td>
                    {% endfor %}
    
                    <td class="py-3 border-b border-gray-200 dark:border-gray-600 text-sm text-gray-700 dark:text-gray-300">
                        <div class="w-10 h-10 flex justify-center items-center">
                            <a id="record-edit" class="flex flex-row justify-center items-center" 
                            up-preload="reveal" 
                            up-cache="auto" 
                            href="{% url 'load_elements' %}?q={% encode_params model=model check_date=check_date project_id=project_id elements='modal_form' pk=record.pk %}" 
                            up-target="#modal">
                                <img src="{% static 'images/icons/edit.png' %}?v={{ STATIC_VERSION }}" alt="Edit Record" class="w-6 h-6">
                            </a>
                        </div>  
                    </td>
                </tr>
                
            </tbody>
        {% endfor %}
    </table>
</div>